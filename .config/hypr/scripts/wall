#!/bin/bash

WALLPAPER_DIR="$HOME/.config/hypr/wallpapers/"
CURRENT_WALLPAPER="$WALLPAPER_DIR/current.jpg"

# Простой выбор через wofi
selected=$(find "$WALLPAPER_DIR" -type f \( \
  -name "*.jpg" -o \
  -name "*.jpeg" -o \
  -name "*.png" -o \
  -name "*.webp" \
  \) -not -name "current.jpg" -exec basename {} \; | sort | wofi --show dmenu --width=400 --prompt "Обои: ")

if [ -n "$selected" ]; then
  wallpaper=$(find "$WALLPAPER_DIR" -name "$selected" | head -1)

  # Копируем выбранные обои как current.jpg
  cp "$wallpaper" "$CURRENT_WALLPAPER"

  # Устанавливаем обои из копии
  swww img "$CURRENT_WALLPAPER" \
    --transition-type grow \
    --transition-step 90 \
    --transition-fps 144 \
    --transition-duration 1.5
fi
